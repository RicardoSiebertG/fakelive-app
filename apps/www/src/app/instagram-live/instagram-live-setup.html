<div class="setup-page">
  <!-- Navigation -->
  <nav class="nav">
    <div class="nav-container">
      <button type="button" (click)="cancel()" class="back-button">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 12H5M12 19l-7-7 7-7"/>
        </svg>
        Back
      </button>
      <h1 class="nav-title">Instagram Fake Live</h1>
    </div>
  </nav>

  <div class="setup-container">

    @if (loading) {
      <div class="loading-container">
        <div class="spinner"></div>
        <p>Loading your settings...</p>
      </div>
    } @else {
      <div class="setup-content">
      <!-- Profile Picture Section -->
      <div class="form-section">
        <label class="section-label">Profile Picture</label>

        <div class="profile-picture-row">
          <div class="profile-picture-area">
            @if (profilePicture) {
              <div class="profile-preview">
                <img [src]="profilePicture" alt="Profile" class="preview-image">
                <button type="button" (click)="removePhoto()" class="btn-remove">âœ•</button>
              </div>
            } @else {
              <div class="profile-placeholder">
                <div class="placeholder-icon">ðŸ‘¤</div>
              </div>
            }
          </div>

          <div class="photo-buttons">
            <button type="button" (click)="selectFile()" class="btn btn-outline">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
              </svg>
              Choose Photo
            </button>
          </div>
        </div>

        <input #fileInput type="file" accept="image/*" capture="user" (change)="onFileSelect($event)" style="display: none">
      </div>

      <!-- Username Section -->
      <div class="form-section">
        <label class="section-label" for="username">Username</label>
        <div class="input-with-icon">
          <input
            type="text"
            id="username"
            [(ngModel)]="username"
            class="input-field input-with-verified"
            placeholder="Enter your username"
            maxlength="30"
          >
          <button type="button" (click)="isVerified = !isVerified" class="verified-icon" [class.verified-active]="isVerified">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="20" height="20">
              <polygon [attr.fill]="isVerified ? '#42a5f5' : '#D1D5DB'" points="29.62,3 33.053,8.308 39.367,8.624 39.686,14.937 44.997,18.367 42.116,23.995 45,29.62 39.692,33.053 39.376,39.367 33.063,39.686 29.633,44.997 24.005,42.116 18.38,45 14.947,39.692 8.633,39.376 8.314,33.063 3.003,29.633 5.884,24.005 3,18.38 8.308,14.947 8.624,8.633 14.937,8.314 18.367,3.003 23.995,5.884"/>
              <polygon fill="#fff" points="21.396,31.255 14.899,24.76 17.021,22.639 21.428,27.046 30.996,17.772 33.084,19.926"/>
            </svg>
          </button>
        </div>
        <p class="help-text">Tap the checkmark to add a verified badge</p>
      </div>

      <!-- Viewer Count Section -->
      <div class="form-section">
        <label class="section-label" for="viewerCount">Initial Viewer Count</label>
        <input
          type="number"
          id="viewerCount"
          [(ngModel)]="viewerCount"
          class="input-field"
          placeholder="e.g., 25000"
          min="0"
          step="100"
        >
        <p class="help-text">The viewer count will fluctuate randomly by up to Â±10% during the stream</p>
      </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons">
        <button type="button" (click)="startLive()" class="btn-start-live">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <circle cx="12" cy="12" r="3" fill="currentColor"/>
          </svg>
          Start Live Stream
        </button>
      </div>
    }
  </div>
</div>
